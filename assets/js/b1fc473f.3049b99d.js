"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[904],{3905:(e,t,o)=>{o.d(t,{Zo:()=>p,kt:()=>m});var n=o(7294);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function r(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,a=function(e,t){if(null==e)return{};var o,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)o=i[n],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)o=i[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var l=n.createContext({}),c=function(e){var t=n.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):r(r({},t),e)),o},p=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var o=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(o),h=a,m=u["".concat(l,".").concat(h)]||u[h]||d[h]||i;return o?n.createElement(m,r(r({ref:t},p),{},{components:o})):n.createElement(m,r({ref:t},p))}));function m(e,t){var o=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=o.length,r=new Array(i);r[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:a,r[1]=s;for(var c=2;c<i;c++)r[c]=o[c];return n.createElement.apply(null,r)}return n.createElement.apply(null,o)}h.displayName="MDXCreateElement"},7930:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var n=o(7462),a=(o(7294),o(3905));const i={sidebar_position:6},r="Custom hosted endpoints",s={unversionedId:"guides/generators",id:"guides/generators",title:"Custom hosted endpoints",description:"Custom hosted endpoints is in private beta, and will be public in Q1 2024. If you are interested in testing it now, please reach out to the devs on Discord.",source:"@site/docs/guides/generators.md",sourceDirName:"guides",slug:"/guides/generators",permalink:"/docs/guides/generators",draft:!1,tags:[],version:"current",lastUpdatedAt:1736838843,formattedLastUpdatedAt:"Jan 14, 2025",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Python SDK",permalink:"/docs/guides/python-sdk"}},l={},c=[{value:"How to make endpoints",id:"how-to-make-endpoints",level:2},{value:"Custom model only",id:"custom-model-only",level:3},{value:"Custom interface",id:"custom-interface",level:3},{value:"ComfyUI workflow",id:"comfyui-workflow",level:3},{value:"Custom code",id:"custom-code",level:3},{value:"Permissioning endpoints",id:"permissioning-endpoints",level:2}],p={toc:c},u="wrapper";function d(e){let{components:t,...o}=e;return(0,a.kt)(u,(0,n.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"custom-hosted-endpoints"},"Custom hosted endpoints"),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Custom hosted endpoints is in private beta, and will be public in Q1 2024. If you are interested in testing it now, please reach out to the devs on ",(0,a.kt)("a",{parentName:"p",href:"https://discord.com/invite/4dSYwDT"},"Discord"),".")),(0,a.kt)("p",null,"Eden offers creators the ability to host their own generators, with their own private base models and custom pipelines/code. This allows creators to leverage the Eden ecosystem on top of their own generators, while maintaining full control and ownership over their pipelines."),(0,a.kt)("p",null,"Hosting your own generators on Eden provides the following benefits:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Provides your users or fans with a convenient way to interact with your generator."),(0,a.kt)("li",{parentName:"ul"},"Encapsulates the complexity of hosting and maintaining your own infrastructure for serving, as well as authentication to prevent abuse or spam."),(0,a.kt)("li",{parentName:"ul"},"Plugs in nicely into Eden's ecosystem, including its social features and ",(0,a.kt)("a",{parentName:"li",href:"/docs/guides/agents"},"character/bot framework"),"."),(0,a.kt)("li",{parentName:"ul"},"Offers developers the ability to design and deploy custom front-ends or interactive applications on top of your generator, using the ",(0,a.kt)("a",{parentName:"li",href:"/docs/guides/sdk"},"Eden SDK"),".")),(0,a.kt)("h2",{id:"how-to-make-endpoints"},"How to make endpoints"),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"Custom hosted endpoints are still under development. This documentation is incomplete and many of these details are subject to change. We expect to stabilize this feature in early 2024.")),(0,a.kt)("p",null,"To create an endpoint, there are several options, depending on your needs."),(0,a.kt)("h3",{id:"custom-model-only"},"Custom model only"),(0,a.kt)("p",null,"If you simply have a custom finetuned model or ",(0,a.kt)("a",{parentName:"p",href:"/docs/guides/concepts"},"LoRA"),", which you'd like to serve through Eden's ",(0,a.kt)("a",{parentName:"p",href:"/docs/guides/creation"},"existing image and video pipelines"),", you can upload your model checkpoint to Eden, and we'll expose a new endpoint on the API for it."),(0,a.kt)("h3",{id:"custom-interface"},"Custom interface"),(0,a.kt)("p",null,"Although most creators generally use the same core SDXL pipelines for generating images and videos, in some cases you may wish to create a custom interface for your users, i.e. a set of adjustable parameters in the form of sliders, toggles, text inputs, and/or media uploads, which resolves to an input config that goes to that generator."),(0,a.kt)("p",null,"Custom interfaces are particularly good for providing a much simpler experience for users, as it allows creators to encapsulate and hide the more technical parameters behind an intuitive interface which highlights the most salient aspects of the generator, as defined by the model's creator."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"Custom interfaces are compatible with custom models, as well as the default ones.")),(0,a.kt)("p",null,"As a toy example, let's suppose you have a custom finetuned model for generating images of stylish cats. You may wish to create a custom interface for the model with the following adjustable parameters:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"A slider which adjusts the level of photorealism of the generated cat, from 0 (fully figurative) to 1 (fully photographic)."),(0,a.kt)("li",{parentName:"ul"},'A toggle which controls the genre of the cat (including "noir", "romantic", "anime", "surreal", etc).')),(0,a.kt)("p",null,"In order to trigger a creation, the custom interface must define a function which maps a selection from the desired settings above into a full Eden config object to the underlying generator. We can do this by pre-defining a default ",(0,a.kt)("a",{parentName:"p",href:"/docs/guides/creation#create"},"/create config")," and adjusting it in various ways. There are often multiple ways of achieving similar effects, and this design process is more of an art than a science. We'll go over a few examples."),(0,a.kt)("p",null,'One way of translating the genre setting would be pre-defining the prompt (e.g. "A stylish cat in the style of {genre}"), and inserting the genre into the prompt string at runtime.'),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'# Example of a user selection\nsettings = {\n  "genre": "noir"\n}\n\n# Convert the above into a full Eden config\nconfig = {\n  "prompt": f"A stylish cat in the style of noir"\n}\n')),(0,a.kt)("p",null,'An alternative way of differentiating the genres would be to keep the prompt static (e.g. "A stylish cat") but to use a pre-assigned starting image for each genre. ',(0,a.kt)("a",{parentName:"p",href:"/docs/guides/creation/#starting-image"},"Because starting images can have a large influence on the final output"),", this can be a powerful tool."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'settings = {\n  "genre": "romantic"\n}\n\nconfig = {\n  "init_image": "my_romantic_starting_image.jpg"\n}\n')),(0,a.kt)("p",null,"Yet another way of differentiating the genres would be to assign separate ",(0,a.kt)("a",{parentName:"p",href:"/docs/guides/concepts"},"concepts")," to each genre."),(0,a.kt)("p",null,"To continue with the example, let's turn to the desired photorealism setting. Unlike genre, it's defined as a continuous parameter, controlled by a slider, rather than a discrete parameter. It needs continuously adjustable config parameters to map onto."),(0,a.kt)("p",null,"One way of representing the photorealism characteristic could be to use a ",(0,a.kt)("a",{parentName:"p",href:"/docs/guides/concepts"},"concept (LoRA)")," trained on photorealism, and then regulated using the ",(0,a.kt)("inlineCode",{parentName:"p"},"lora_scale")," parameter."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'settings = {\n  "photorealism": 0.72\n}\n\nconfig = {\n  "lora": "photorealism",\n  "lora_scale": 0.72\n}\n')),(0,a.kt)("p",null,'Another option for representing photorealism as a adjustable slider value is to use the technique of prompt interpolation, where you define two static prompts for each of the extremes, and then interpolate between the two at runtime. For photorealism, the prompts may be "A stylish cat in a figurative cartoonish style" for 0, and "A stylish cat, photorealistic" for 1.'),(0,a.kt)("p",null,"The above example is fairly simple but powerful. In practice, there is a lot of creativity and felxibility in defining the mapping function. The levers you have to control the final output, in order of influence, are:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The base model/checkpoint"),(0,a.kt)("li",{parentName:"ul"},"Concepts/LoRas"),(0,a.kt)("li",{parentName:"ul"},"The prompt (and negative prompt)"),(0,a.kt)("li",{parentName:"ul"},"Starting images (as an init_image or ",(0,a.kt)("a",{parentName:"li",href:"/docs/guides/creation#controlnet"},"controlnet")," image), which can include static images pre-defined by the creator"),(0,a.kt)("li",{parentName:"ul"},"Generation parameters (guidance scale, starting image strength, etc)")),(0,a.kt)("p",null,"The Eden team will work closely with you to come up with the mapping function which enables your desired custom interface."),(0,a.kt)("h3",{id:"comfyui-workflow"},"ComfyUI workflow"),(0,a.kt)("p",null,"Creators who use ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/comfyanonymous/ComfyUI"},"ComfyUI")," can simply export their worfklows as json objects, define the free parameters in the workflow they wish to expose to users, and we can turn them directly into endpoints."),(0,a.kt)("p",null,"Note that ComfyUI workflows may also make use of ",(0,a.kt)("a",{parentName:"p",href:"/docs/guides/generators#custom-interface"},"custom interfaces")," to simplify the user experience of triggering their workflow."),(0,a.kt)("h3",{id:"custom-code"},"Custom code"),(0,a.kt)("p",null,"For creators who desire full control of the entire process and are writing their own customized pipelines directly in code, we can host your pipeline as a custom endpoint. This is the most flexible option, but also requires the most technical expertise."),(0,a.kt)("p",null,"Eden generators are currently hosted by ",(0,a.kt)("a",{parentName:"p",href:"https://replicate.com/"},"Replicate")," as ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/replicate/cog"},"cogs"),". If you are familiar with cog, you can simply create a cog and either host it yourself, or let us host it. If you are not familiar with cog, we can work with you to convert your generation code into a cog."),(0,a.kt)("h2",{id:"permissioning-endpoints"},"Permissioning endpoints"),(0,a.kt)("p",null,"Generators can be fully public to Eden users, like the other endpoints, or they can be fully private to the owner, or only accessible to a specific set of whitelisted users."),(0,a.kt)("hr",null),(0,a.kt)("p",null,"Every creation made on Eden is defined by a config of all the settings that determine it. the main settings are: "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"prompt"),(0,a.kt)("li",{parentName:"ul"},"concept and concept strength (optional but recommended)"),(0,a.kt)("li",{parentName:"ul"},"starting image / control image (optional)\nthere are a bunch more obscure settings that you can usually leave at defaults but you can also experiment with to get more unusual results. ")),(0,a.kt)("p",null,"to make a generator on kojii you need to define an interface that maps user inputs (i.e. buttons, sliders, text inputs, and/or image uploads) to eden configs."),(0,a.kt)("p",null,"for example, suppose you decide to have these toggles:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"apple / banana / lemon"),(0,a.kt)("li",{parentName:"ul"},"photo / comic book / sculpture"),(0,a.kt)("li",{parentName:"ul"},"day / night")),(0,a.kt)("p",null,"some examples of things you can do:"),(0,a.kt)("p",null,'you can inject the selected words into a prompt, e.g. "{comic book} of a {lemon} at {night}" or "{sculpture} of a {banana} at {day}". '),(0,a.kt)("p",null,'you can use the selections as placeholders for longer text strings. e.g. day = "bright sunlit room in a glass house, solarpunk" and night = "cyberpunk alley, dark shadows". So your prompt can be assembled at runtime by pasting chunks that you\'ve curated.'),(0,a.kt)("p",null,'you can map the selections to starting images or control images (if using controlnet). e.g. selecting "apple" it will use a picture of an apple as the image input (or a random sample from an array of them), and for "banana" it samples a banana picture. you can use your own artworks or images from the internet (within reason -- try to respect other people\'s ip/style/livelihoods). you can have even hundreds of these and randomly sample from them.'),(0,a.kt)("p",null,'besides for toggles, you can also have sliders. these are continuous values -- things you can have more or less of -- as opposed to discrete categories. for example, you could have a slider that goes between "photorealistic" and "abstract". images where it\'s selected in the middle should be partially photorealistic and partially abstract. one way to accomplish this would be to define a prompt for each extreme:\ne.g. photorealistic = "A banana, hyper-photorealistic, 4k, 8mm camera, highly detailed, realism", and abstract = "A banana, figurative, abstract, minimalist, triangles"\nat runtime, we can actually "average" the two prompts according to the selection i.e. 20% photorealistic + 80% abstract.'),(0,a.kt)("p",null,'the last really important part is the concept / LoRA. this can be the main pillar of your collection -- it\'s the first pass at distinguishing a more specific style from base stable diffusion. but it\'s also possible to use multiple concepts and switch them out depending on the settings. for example, you can have separate concepts for "apple" "banana" and "lemon" which get swapped out according to which of them was selected. every artist has a distinct style, but they may also have sub-styles -- you might have a few genres you mix together, and you can get them by training a collection of similar concepts which have subtle differences among them.'),(0,a.kt)("p",null,"there's a lot of creativity in putting these rules together, and it's more of an art than a science. you are letting people customize artworks in your style. so you're trying to constrain it so that all the images that come out of it feel distinctly yours and distinctly from this particular collection, but that the user feels like they influenced the image, got a surprising or unique result, like they collaborated with you to make it."))}d.isMDXComponent=!0}}]);